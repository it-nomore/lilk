(this.webpackJsonplilk=this.webpackJsonplilk||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(5),o=n.n(r),s=(n(12),n(2)),i=(n(13),n(14),n(0));var u=function(e){var t=e.llck,n=e.onPull,a=e.onSearchChange;return Object(i.jsxs)("form",{className:"Search",onSubmit:function(e){e.preventDefault(),n(e.target[0].value)},children:[Object(i.jsx)("input",{className:"Search-field",type:"text",value:t,onChange:function(e){a(e.target.value)}}),Object(i.jsx)("button",{className:"Search-button",children:"pull"})]})},l=n(4);n(16);var d=function(e){var t=e.name,n=e.count,a=e.onPull;return Object(i.jsxs)("div",{className:"Link",children:[Object(i.jsx)("a",{className:"Link-title",href:"/",onClick:function(e){e.preventDefault(),a(e.target.innerText)},children:t}),Object(i.jsx)("div",{className:"Link-counter",children:n})]})},f=n(6),b=n(7),j=function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,null,[{key:"makeInfoMap",value:function(t){var n=new Map;return t.forEach((function(t){t.id&&n.set("=".concat(t.id),1),t.it&&e._addKeyInfo(n,t,"it","/"),t.is&&e._addKeyInfo(n,t,"is",":"),t.to&&e._addKeyInfo(n,t,"to","@"),t.in&&e._addKeyInfo(n,t,"in","#"),t.or&&e._addKeyInfo(n,t,"or","!"),t.by&&e._addKeyInfo(n,t,"by","?")})),n}},{key:"parseToQuery",value:function(t){var n=e.parseToObj(t),a="";return n.id&&(a=n.id),n.it&&(a=e._addParam(a,"it",n.it)),n.is&&(a=e._addParam(a,"is",n.is)),n.to&&(a=e._addParam(a,"to",n.to)),n.in&&(a=e._addParam(a,"in",n.in)),n.or&&(a=e._addParam(a,"or",n.or)),n.by&&(a=e._addParam(a,"by",n.by)),a}},{key:"parseToObj",value:function(t){var n=t.split(" "),a={};return n.forEach((function(t){switch(t[0]){case"=":a.id=t.substr(1);break;case"/":e._addKey(a,"it",t.substr(1));break;case":":e._addKey(a,"is",t.substr(1));break;case"@":e._addKey(a,"to",t.substr(1));break;case"#":e._addKey(a,"in",t.substr(1));break;case"!":e._addKey(a,"or",t.substr(1));break;case"?":e._addKey(a,"by",t.substr(1))}})),a}},{key:"_addKey",value:function(e,t,n){/^[a-z0-9_\-.]+$/.test(n)&&(e[t]?Array.isArray(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n)}},{key:"_addParam",value:function(e,t,n){return Array.isArray(n)?n.forEach((function(n){e+=e?"&".concat(t,"=").concat(n):"".concat(t,"=").concat(n)})):e+=e?"&".concat(t,"=").concat(n):"".concat(t,"=").concat(n),e}},{key:"_addKeyInfo",value:function(e,t,n,a){(Array.isArray(t[n])?t[n]:[t[n]]).forEach((function(t){e.has("".concat(a).concat(t))?e.set("".concat(a).concat(t),e.get("".concat(a).concat(t))+1):e.set("".concat(a).concat(t),1)}))}}]),e}();n(17);var h=function(e){var t=e.html,n=e.name,c=Object(a.useRef)(null);return Object(i.jsx)("iframe",{ref:c,onLoad:function(){try{var e=c.current.contentDocument.body,t=c.current.contentDocument.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.offsetHeight);c.current.style="height: ".concat(n,"px")}catch(a){console.log("error resize | ",a)}},className:"Portal",frameBorder:"0",scrolling:"no",title:"wed",name:n,srcDoc:t})};n(18);var m=function(e){var t=e.onPush;return Object(i.jsx)("form",{className:"PushForm",onSubmit:function(e){e.preventDefault(),t()},children:Object(i.jsx)("button",{className:"PushForm-button",children:"Push"})})};n(19);var O=function(e){var t=e.req,n=e.onPull,c=Object(a.useState)(null),r=Object(s.a)(c,2),o=r[0],u=r[1],f=Object(a.useState)(!1),b=Object(s.a)(f,2),O=b[0],y=b[1],p=Object(a.useState)([]),v=Object(s.a)(p,2),x=v[0],k=v[1],g=Object(a.useState)(null),P=Object(s.a)(g,2),_=P[0],S=P[1],N=Object(a.useState)(null),K=Object(s.a)(N,2),w=K[0],I=K[1];Object(a.useEffect)((function(){fetch("https://tranquil-chamber-18069.herokuapp.com/?".concat(t)).then((function(e){return e.json()})).then((function(e){y(!0),k(e),I(t?null:j.makeInfoMap(e))}),(function(e){y(!0),u(e)}))}),[t]),Object(a.useEffect)((function(){window.addEventListener("message",(function(e){e.data&&"string"===typeof e.data&&S({from:e.source.name,data:e.data})}))}),[]);var A=function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)(Object(l.a)({},j.parseToObj(_.data)),{},{html:_.data}))};fetch("https://tranquil-chamber-18069.herokuapp.com/",e),S(null)};return o?Object(i.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",o.message]}):O?Object(i.jsxs)("ul",{className:"View ".concat(t?"":"View--shorts"),children:[t&&x.map((function(e,t){return Object(i.jsxs)("li",{className:"View-item",children:[Object(i.jsx)(h,{html:e.html,name:t}),_&&_.from===t.toString()&&Object(i.jsx)(m,{onPush:A})]},t)})),!t&&w&&Array.from(w).map((function(e,t){return Object(i.jsx)("li",{className:"View-item",children:Object(i.jsx)(d,{name:e[0],count:e[1],onPull:n})},t)}))]}):Object(i.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})};var y=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(s.a)(r,2),l=o[0],d=o[1],f=function(e){c(e),d(j.parseToQuery(e))};return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:Object(i.jsx)(u,{llck:n,onPull:f,onSearchChange:function(e){c(e)}})}),Object(i.jsx)("main",{className:"App-main",children:Object(i.jsx)(O,{req:l,onPull:f})})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root")),p()}],[[20,1,2]]]);
//# sourceMappingURL=main.770ebe22.chunk.js.map