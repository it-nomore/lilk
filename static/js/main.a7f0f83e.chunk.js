(this.webpackJsonplilk=this.webpackJsonplilk||[]).push([[0],{22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(13),s=n.n(r),o=(n(22),n(5)),i=(n(23),n(24),n(1));var u=function(t){var e=t.llck,n=t.onPull,c=t.onSearchChange;return Object(i.jsxs)("form",{className:"Search",onSubmit:function(t){t.preventDefault(),n(t.target[0].value)},children:[Object(i.jsx)("input",{className:"Search-field",type:"text",value:e,onChange:function(t){c(t.target.value)}}),Object(i.jsx)("button",{className:"Search-button",children:"pull"})]})},l=n(12);n(26);var d=function(t){var e=t.name,n=t.count,c=t.onPull;return Object(i.jsxs)("div",{className:"Link",children:[Object(i.jsx)("a",{className:"Link-title",href:"/",onClick:function(t){t.preventDefault(),c(t.target.innerText)},children:e}),Object(i.jsx)("div",{className:"Link-counter",children:n})]})},b=n(14),f=n(15),h=function(){function t(){Object(b.a)(this,t)}return Object(f.a)(t,null,[{key:"inLitForm",value:function(e){return e.split(" ").map((function(e){return t._inLitFormOne(e)})).join("--")}},{key:"inSignForm",value:function(e){return e.split("--").map((function(e){return t._inSignFormOne(e)})).join(" ")}},{key:"makeInfoMap",value:function(e){var n=new Map;return e.forEach((function(e){e.id&&n.set("=".concat(e.id),1),e.it&&t._addKeyInfo(n,e,"it","/"),e.is&&t._addKeyInfo(n,e,"is",":"),e.to&&t._addKeyInfo(n,e,"to","@"),e.in&&t._addKeyInfo(n,e,"in","#"),e.or&&t._addKeyInfo(n,e,"or","!"),e.by&&t._addKeyInfo(n,e,"by","?")})),n}},{key:"parseToQuery",value:function(e){var n=t.parseToObj(e),c="";return n.id&&(c=n.id),n.it&&(c=t._addParam(c,"it",n.it)),n.is&&(c=t._addParam(c,"is",n.is)),n.to&&(c=t._addParam(c,"to",n.to)),n.in&&(c=t._addParam(c,"in",n.in)),n.or&&(c=t._addParam(c,"or",n.or)),n.by&&(c=t._addParam(c,"by",n.by)),c}},{key:"parseToObj",value:function(e){var n=e.split(" "),c={};return n.forEach((function(e){switch(e[0]){case"=":c.id=e.substr(1);break;case"/":t._addKey(c,"it",e.substr(1));break;case":":t._addKey(c,"is",e.substr(1));break;case"@":t._addKey(c,"to",e.substr(1));break;case"#":t._addKey(c,"in",e.substr(1));break;case"!":t._addKey(c,"or",e.substr(1));break;case"?":t._addKey(c,"by",e.substr(1))}})),c}},{key:"_addKey",value:function(t,e,n){/^[a-z0-9_\-.]+$/.test(n)&&(t[e]?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n)}},{key:"_addParam",value:function(t,e,n){return Array.isArray(n)?n.forEach((function(n){t+=t?"&".concat(e,"=").concat(n):"".concat(e,"=").concat(n)})):t+=t?"&".concat(e,"=").concat(n):"".concat(e,"=").concat(n),t}},{key:"_addKeyInfo",value:function(t,e,n,c){(Array.isArray(e[n])?e[n]:[e[n]]).forEach((function(e){t.has("".concat(c).concat(e))?t.set("".concat(c).concat(e),t.get("".concat(c).concat(e))+1):t.set("".concat(c).concat(e),1)}))}},{key:"_inLitFormOne",value:function(t){switch(t[0]){case"=":return"id-".concat(t.substr(1));case"/":return"it-".concat(t.substr(1));case":":return"is-".concat(t.substr(1));case"@":return"to-".concat(t.substr(1));case"#":return"in-".concat(t.substr(1));case"!":return"or-".concat(t.substr(1));case"?":return"by-".concat(t.substr(1));default:return}}},{key:"_inSignFormOne",value:function(t){switch(t.substr(0,2)){case"id":return"=".concat(t.substr(3));case"it":return"/".concat(t.substr(3));case"is":return":".concat(t.substr(3));case"to":return"@".concat(t.substr(3));case"in":return"#".concat(t.substr(3));case"or":return"!".concat(t.substr(3));case"by":return"?".concat(t.substr(3));default:return}}}]),t}();n(27);var j=function(t){var e=t.html,n=t.name,a=Object(c.useRef)(null);return Object(i.jsx)("iframe",{ref:a,onLoad:function(){try{var t=a.current.contentDocument.body,e=a.current.contentDocument.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,e.offsetHeight),c=Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth);a.current.style="height: ".concat(n,"px; width: ").concat(c,"px")}catch(r){console.log("error resize | ",r)}},className:"Portal",frameBorder:"0",scrolling:"no",title:"wed",name:n,srcDoc:e})};n(28);var m=function(t){var e=t.onPush;return Object(i.jsx)("form",{className:"PushForm",onSubmit:function(t){t.preventDefault(),e()},children:Object(i.jsx)("button",{className:"PushForm-button",children:"Push"})})};n(29);var O=function(t){var e=t.req,n=t.onPull,a=Object(c.useState)(null),r=Object(o.a)(a,2),s=r[0],u=r[1],b=Object(c.useState)(!1),f=Object(o.a)(b,2),O=f[0],y=f[1],p=Object(c.useState)([]),v=Object(o.a)(p,2),x=v[0],k=v[1],g=Object(c.useState)(null),_=Object(o.a)(g,2),S=_[0],P=_[1],N=Object(c.useState)(null),F=Object(o.a)(N,2),w=F[0],K=F[1];Object(c.useEffect)((function(){fetch("https://tranquil-chamber-18069.herokuapp.com/?".concat(e)).then((function(t){return t.json()})).then((function(t){y(!0),k(t),K(e?null:h.makeInfoMap(t))}),(function(t){y(!0),u(t)}))}),[e]),Object(c.useEffect)((function(){window.addEventListener("message",(function(t){t.data&&"string"===typeof t.data&&P({from:t.source.name,data:t.data})}))}),[]);var I=function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)(Object(l.a)({},h.parseToObj(S.data)),{},{html:S.data}))};fetch("https://tranquil-chamber-18069.herokuapp.com/",t),P(null)};return s?Object(i.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",s.message]}):O?Object(i.jsxs)("ul",{className:"View ".concat(e?"":"View--shorts"),children:[e&&x.map((function(t,e){return Object(i.jsxs)("li",{className:"View-item",children:[Object(i.jsx)(j,{html:t.html,name:e}),S&&S.from===e.toString()&&Object(i.jsx)(m,{onPush:I})]},e)})),!e&&w&&Array.from(w).map((function(t,e){return Object(i.jsx)("li",{className:"View-item",children:Object(i.jsx)(d,{name:t[0],count:t[1],onPull:n})},e)}))]}):Object(i.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})},y=n(2);var p=function(){var t=Object(y.d)(),e=Object(y.e)().search.substr(1),n=Object(c.useState)(e?h.inSignForm(e):""),a=Object(o.a)(n,2),r=a[0],s=a[1],l=Object(c.useState)(e?h.parseToQuery(h.inSignForm(e)):""),d=Object(o.a)(l,2),b=d[0],f=d[1],j=function(e){s(e),f(h.parseToQuery(e)),t.push({search:"?".concat(h.inLitForm(e))})};return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:Object(i.jsx)(u,{llck:r,onPull:j,onSearchChange:function(t){s(t)}})}),Object(i.jsx)("main",{className:"App-main",children:Object(i.jsx)(O,{req:b,onPull:j})})]})},v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),c(t),a(t),r(t),s(t)}))},x=n(9);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(x.a,{children:Object(i.jsx)(p,{})})}),document.getElementById("root")),v()}},[[38,1,2]]]);
//# sourceMappingURL=main.a7f0f83e.chunk.js.map