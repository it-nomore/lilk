(this.webpackJsonplilk=this.webpackJsonplilk||[]).push([[0],[,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(5),o=n.n(r),s=(n(12),n(2)),i=(n(13),n(14),n(0));var u=function(t){var e=t.llck,n=t.onPull,a=t.onSearchChange;return Object(i.jsxs)("form",{className:"Search",onSubmit:function(t){t.preventDefault(),n(t.target[0].value)},children:[Object(i.jsx)("input",{className:"Search-field",type:"text",value:e,onChange:function(t){a(t.target.value)}}),Object(i.jsx)("button",{className:"Search-button",children:"pull"})]})},l=n(4);n(16);var d=function(t){var e=t.name,n=t.count,a=t.onPull;return Object(i.jsxs)("div",{className:"Link",children:[Object(i.jsx)("a",{className:"Link-title",href:"/",onClick:function(t){t.preventDefault(),a(t.target.innerText)},children:e}),Object(i.jsx)("div",{className:"Link-counter",children:n})]})},f=n(6),b=n(7),h=function(){function t(){Object(f.a)(this,t)}return Object(b.a)(t,null,[{key:"makeInfoMap",value:function(e){var n=new Map;return e.forEach((function(e){e.id&&n.set("=".concat(e.id),1),e.it&&t._addKeyInfo(n,e,"it","/"),e.is&&t._addKeyInfo(n,e,"is",":"),e.to&&t._addKeyInfo(n,e,"to","@"),e.in&&t._addKeyInfo(n,e,"in","#"),e.or&&t._addKeyInfo(n,e,"or","!"),e.by&&t._addKeyInfo(n,e,"by","?")})),n}},{key:"parseToQuery",value:function(e){var n=t.parseToObj(e),a="";return n.id&&(a=n.id),n.it&&(a=t._addParam(a,"it",n.it)),n.is&&(a=t._addParam(a,"is",n.is)),n.to&&(a=t._addParam(a,"to",n.to)),n.in&&(a=t._addParam(a,"in",n.in)),n.or&&(a=t._addParam(a,"or",n.or)),n.by&&(a=t._addParam(a,"by",n.by)),a}},{key:"parseToObj",value:function(e){var n=e.split(" "),a={};return n.forEach((function(e){switch(e[0]){case"=":a.id=e.substr(1);break;case"/":t._addKey(a,"it",e.substr(1));break;case":":t._addKey(a,"is",e.substr(1));break;case"@":t._addKey(a,"to",e.substr(1));break;case"#":t._addKey(a,"in",e.substr(1));break;case"!":t._addKey(a,"or",e.substr(1));break;case"?":t._addKey(a,"by",e.substr(1))}})),a}},{key:"_addKey",value:function(t,e,n){/^[a-z0-9_\-.]+$/.test(n)&&(t[e]?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n)}},{key:"_addParam",value:function(t,e,n){return Array.isArray(n)?n.forEach((function(n){t+=t?"&".concat(e,"=").concat(n):"".concat(e,"=").concat(n)})):t+=t?"&".concat(e,"=").concat(n):"".concat(e,"=").concat(n),t}},{key:"_addKeyInfo",value:function(t,e,n,a){(Array.isArray(e[n])?e[n]:[e[n]]).forEach((function(e){t.has("".concat(a).concat(e))?t.set("".concat(a).concat(e),t.get("".concat(a).concat(e))+1):t.set("".concat(a).concat(e),1)}))}}]),t}();n(17);var j=function(t){var e=t.html,n=t.name,c=Object(a.useRef)(null);return Object(i.jsx)("iframe",{ref:c,onLoad:function(){try{var t=c.current.contentDocument.body,e=c.current.contentDocument.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,e.offsetHeight),a=Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth);c.current.style="height: ".concat(n,"px; width: ").concat(a,"px")}catch(r){console.log("error resize | ",r)}},className:"Portal",frameBorder:"0",scrolling:"no",title:"wed",name:n,srcDoc:e})};n(18);var m=function(t){var e=t.onPush;return Object(i.jsx)("form",{className:"PushForm",onSubmit:function(t){t.preventDefault(),e()},children:Object(i.jsx)("button",{className:"PushForm-button",children:"Push"})})};n(19);var O=function(t){var e=t.req,n=t.onPull,c=Object(a.useState)(null),r=Object(s.a)(c,2),o=r[0],u=r[1],f=Object(a.useState)(!1),b=Object(s.a)(f,2),O=b[0],y=b[1],p=Object(a.useState)([]),v=Object(s.a)(p,2),x=v[0],k=v[1],g=Object(a.useState)(null),P=Object(s.a)(g,2),_=P[0],S=P[1],N=Object(a.useState)(null),K=Object(s.a)(N,2),w=K[0],I=K[1];Object(a.useEffect)((function(){fetch("https://tranquil-chamber-18069.herokuapp.com/?".concat(e)).then((function(t){return t.json()})).then((function(t){y(!0),k(t),I(e?null:h.makeInfoMap(t))}),(function(t){y(!0),u(t)}))}),[e]),Object(a.useEffect)((function(){window.addEventListener("message",(function(t){t.data&&"string"===typeof t.data&&S({from:t.source.name,data:t.data})}))}),[]);var A=function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(l.a)(Object(l.a)({},h.parseToObj(_.data)),{},{html:_.data}))};fetch("https://tranquil-chamber-18069.herokuapp.com/",t),S(null)};return o?Object(i.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",o.message]}):O?Object(i.jsxs)("ul",{className:"View ".concat(e?"":"View--shorts"),children:[e&&x.map((function(t,e){return Object(i.jsxs)("li",{className:"View-item",children:[Object(i.jsx)(j,{html:t.html,name:e}),_&&_.from===e.toString()&&Object(i.jsx)(m,{onPush:A})]},e)})),!e&&w&&Array.from(w).map((function(t,e){return Object(i.jsx)("li",{className:"View-item",children:Object(i.jsx)(d,{name:t[0],count:t[1],onPull:n})},e)}))]}):Object(i.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})};var y=function(){var t=Object(a.useState)(""),e=Object(s.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(""),o=Object(s.a)(r,2),l=o[0],d=o[1],f=function(t){c(t),d(h.parseToQuery(t))};return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:Object(i.jsx)(u,{llck:n,onPull:f,onSearchChange:function(t){c(t)}})}),Object(i.jsx)("main",{className:"App-main",children:Object(i.jsx)(O,{req:l,onPull:f})})]})},p=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root")),p()}],[[20,1,2]]]);
//# sourceMappingURL=main.9af544dd.chunk.js.map